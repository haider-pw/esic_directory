!function(e,t){e.leadFormWidget=e.leadFormWidget?e.leadFormWidget:[];var o={assetUrl:"",dataUrl:"",leadformUrl:"/leadForm",sessionLength:450,closeOnClickOverlay:!0,name:"leadform",init:function(e){this.options=e,this.forms=[],this.preview=e.preview;var t=e.asset_domain||e.hostname,o=e.data_domain||t,r="promote.weebly.com"===o?"https":"http";this.dataUrl=r+"://"+o,this.assetUrl=t?"//"+t:"",this.leadformUrl=this.dataUrl+this.leadformUrl,this.options.form_ids.length&&this.appendContainerStyle()},isMobile:function(){var e=navigator.userAgent.match(/Android/i),t=navigator.userAgent.match(/BlackBerry/i),o=navigator.userAgent.match(/iPhone|iPad|iPod/i),r=navigator.userAgent.match(/Opera Mini/i),n=navigator.userAgent.match(/IEMobile/i);return e||t||o||r||n},appendContainerStyle:function(){var e=this;t.getElementsByTagName("head")[0].appendChild(e.createStyle("lead-form-container")),e.options.form_ids.forEach(function(t){""!==t&&e.appendForm(t)})},hasSeenFormRecently:function(e,t){var o=this.readCookie(this.name+"_"+e+"_viewed");if(o&&t){var r=Math.round((new Date).getTime()/1e3)-parseInt(o);return r<t}},setViewedCookie:function(e){var t=this.name+"_"+e+"_viewed";this.createCookie(t,Math.round((new Date).getTime()/1e3))},hasSubmittedForm:function(e){var t=this.name+"_"+e+"_submitted";return!!this.readCookie(t)},setSubmittedCookie:function(e){var t=this.name+"_"+e+"_submitted";this.createCookie(t,"1")},seenInSession:function(e){var t=this.readCookie(this.name+"_"+e+"_viewed"),o=Math.round((new Date).getTime()/1e3)-parseInt(t);return o<this.sessionLength},shouldDisplayForm:function(e){var t=this,o=new Date,r=t.getCurrentForm(e);if(window.location.href.indexOf("checkout.weebly.com")!==-1)return!1;var n=r.control.duration,a=r.control.deviceTypes,i=r.control.newVisitorsOnly,s=!n.enabled||n.enabled&&n.start&&n.end&&o.getTime()>=n.start&&o.getTime()<=n.end,l="all"==a||"desktop-only"==a&&!t.isMobile()||"mobile-only"==a&&t.isMobile(),d=i&&!t.hasSeenFormRecently(e,r.formData.control.displayLimit)&&!t.hasSubmittedForm(e),c=!i&&!t.hasSubmittedForm(e)&&!t.seenInSession(e);return s&&l&&(d||c)},appendForm:function(e){var t=this;t.jsonRequest(t.leadformUrl+"/"+e,function(o,r){if(o){var n=JSON.parse(r.response),a=n.type,i=n.subtype;n.deactivated&&!t.preview||(t.forms[e]={name:t.name,type:a,subtype:i,isModal:"popup"==a||"anchored"==a&&"tab"!=i&&"sidebar"!=i,isAnchor:"anchored"==a,control:n.control,formData:n},n.display.textDisplay.anchor&&n.display.textDisplay.anchor.font&&t.embedGoogleFonts(n.display.textDisplay.anchor.font),(t.preview||t.shouldDisplayForm.bind(t)(e)||n.control.exitIntent)&&t.prepElements(t.forms[e].formData,e))}})},getCurrentForm:function(e){var t="";return this.forms&&(t=this.forms[e]),t},createStyle:function(e){var o=t.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=this.assetUrl+"/css/"+e+".css?"+Math.floor(Date.now()/1e3),o.media="all",o},embedGoogleFonts:function(e){var o=e.split(",")[0],r=t.createElement("link");r.rel="stylesheet",r.type="text/css",r.href="https://fonts.googleapis.com/css?family="+o,t.getElementsByTagName("head")[0].appendChild(r)},createElements:function(e,t){var o=this,r={},n=e.type,a=o.getCurrentForm(t),i=a.isAnchor&&a.isModal;r.popupOverlay=o.createEl("div",{id:o.generateSelectorId(n,"popupOverlay",t),"class":o.generateSelectorClasses(e,"popupOverlay",t),styles:o.getCustomStyles("smart-bar"==n,"containerBackground",e)}),r.iframeContainer=o.createEl("div",{"class":o.generateSelectorClasses(e,"iframeContainer",t),styles:o.getCustomStyles("popup"==n,"containerBackground",e)});var s={};if(e.form_height&&(s={height:e.form_height+"px"}),r.iframe=o.createEl("iframe",o.extendObjs({src:o.leadformUrl+"?form_id="+t+(o.preview?"&preview="+o.preview:""),id:o.generateSelectorId(n,"iframe",t),frameborder:0,scrolling:"no"},s)),r.popup=o.createEl("div",{"class":o.generateSelectorClasses(e,"popup",t)}),r.close=o.createEl("div",{id:o.generateSelectorId(n,"close",t),"class":o.generateSelectorClasses(e,"close",t)}),i){var l="";"undefined"!=e.anchor.text&&(l=e.anchor.text),r.trigger=o.createEl("div",{id:o.generateSelectorId(n,"trigger",t),"class":o.generateSelectorClasses(e,"trigger",t),styles:o.extendObjs(o.getCustomStyles("undefined"!=e.display.colors.anchor,"anchorBackground",e),o.getCustomStyles("undefined"!=e.display.textDisplay.anchor,"anchorColor",e)),text:l})}return r},generateSelectorId:function(e,t,o){var r=this.getCurrentForm(o),n=r?r.name:this.name,a="";return"popupOverlay"==t?a=n+"-"+e+"-widget-"+o:"iframe"==t?a="iframe-"+o:"close"==t?a=n+"-"+e+"-close-"+o:"trigger"==t&&(a=n+"-"+e+"-trigger-"+o),a},generateSelectorClasses:function(e,t,o){var r=this,n=r.getCurrentForm(o),a=n?n.name:r.name,i=e.type,s=e.subtype,l=n.isModal,d=n.isAnchor,c=[];switch(t){case"popupOverlay":c.push(a+"-"+i+"-widget"),c.push(a+"-"+i+"-widget--"+s),l&&c.push(a+"-"+i+"-widget--modal"),l&&d&&(c.push(a+"-popup-widget"),c.push(a+"-popup-widget--"+s),c.push(a+"-popup-widget--modal")),(l||d)&&r.preview&&c.push("is-preview"),e.anchor&&e.anchor.align&&c.push("align-"+e.anchor.align);break;case"iframeContainer":c.push(a+"-"+i+"-container"),c.push(a+"-"+i+"-container--"+s),l&&d&&c.push(a+"-popup-container "+a+"-popup-container--"+s);break;case"popup":c.push(a+"-"+i+"-widget-overlay"),l&&d&&c.push(a+"-popup-widget-overlay");break;case"close":c.push(a+"-"+i+"-close"),c.push(a+"-"+i+"-close--"+s),e["background-image"]&&c.push(a+"-"+i+"-close--dark"),l&&d&&c.push(a+"-popup-close");break;case"trigger":c.push(a+"-"+i+"-trigger"),c.push(a+"-"+i+"-trigger--"+s),e.anchor.align&&c.push("align-"+e.anchor.align),e.anchor.style&&c.push("style-"+e.anchor.style)}return c.join(" ")},getCustomStyles:function(e,t,o){var r=this,n="smart-bar"==o.type?"#000":"#fff",a={};if(e)switch(t){case"containerBackground":var i="undefined"!=typeof o.display.colors.background&&""!=o.display.colors.background?o.display.colors.background:n;i.indexOf("NaN")>-1&&(i=i.replace("NaN","1")),a.backgroundColor=i;break;case"anchorBackground":a["background-color"]=o.display.colors.anchor;break;case"anchorColor":var s=o.display.textDisplay.anchor;for(var l in s)if(s[l]){var d=r.camelCaseToDashed(l);"size"==d?d="font-size":"font"==d&&(d="font-family"),a[d]=s[l]}}return a},createEl:function(e,o){var r=t.createElement(e);if(o)for(var n in o)if("styles"==n){if(o[n])for(var a in o[n])o[n][a]&&(r.style[a]=o[n][a])}else"text"==n?r.innerHTML=o[n]?o[n]:"":o[n]&&r.setAttribute(n,o[n]);return r},extendObjs:function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},prepElements:function(e,o){var r=this,n=r.getCurrentForm(o),a=r.getScrollingContainer(),i=Math.max(t.body.scrollHeight,t.body.offsetHeight,t.documentElement.clientHeight,t.documentElement.scrollHeight,t.documentElement.offsetHeight);"scrollHeight"in a&&(i=Math.max(i,a.scrollHeight));var s=document.documentElement.clientHeight;Math.max(0,i-s);n.elements=r.createElements(e,o);var l=n.elements,d=n.isAnchor&&n.isModal;l.iframe.onload=function(){r.iframeRelay(o,e),r.iframeListener(),!r.preview&&e.control.exitIntent&&window.addEventListener("mousemove",r.onMouseMove.bind(r,o))},l.iframeContainer.appendChild(l.iframe),l.iframeContainer.appendChild(l.close),l.popup.appendChild(l.iframeContainer),l.popupOverlay.appendChild(l.popup),r.prependTo(l.popupOverlay,t.body),d&&t.body.appendChild(l.trigger),r.preview||r.buttonClose(o),d&&r.buttonAnchor(o)},onMouseMove:function(e,t){function o(e,t,o){return o>=e&&o<=t}var r=this,n=r.getCurrentForm(e),a=window.innerWidth,i=window.innerHeight;clearTimeout(n.checkExitTimer);var s=35;(o(0,s,t.clientX)||o(0,s,t.clientY)||o(a-s,a,t.clientX)||o(i-s,i,t.clientY))&&(n.checkExitTimer=setTimeout(function(){!n.opened&&n.ready&&(n.exitSignal=!0,r.open(e,n.formData,!0))},100))},prependTo:function(e,t){var o=t.children?t.children[0]:"";o?t.insertBefore(e,o):t.appendChild(e)},docReady:function(e,t){var o=this,r=e.form_id,n=e.metadata.control,a=n.timing.delay,i=o.getCurrentForm(r);return i.ready=!0,t||"anchored"==e.metadata.type?void o.open(r,e.metadata):void("timer"==e.metadata.control.timing.type?o.showOnTimer(r,a,e.metadata):o.showOnScroll(r,a,e.metadata))},iframeRelay:function(e,o,r){var n=this,a=t.getElementById("iframe-"+e).contentWindow,i=o.subtype?n.name+" "+n.name+"--"+o.type+" "+n.name+"--"+o.subtype:"";r=r?r:{},a.postMessage(n.extendObjs({bodyClass:i,parentHostname:window.location.origin},r),n.dataUrl)},iframeListener:function(){var t=this,o=window.addEventListener?"addEventListener":"attachEvent",r=e[o],n="attachEvent"==o?"onmessage":"message";r(n,function(e){var o=e.data;switch(o.action){case"docReady":t.docReady(o.modelData,o.preview);break;case"destroy":t.destroy(o.modelData.form_id,o.modelData);break;case"toggleForm":t.toggleForm(o.modelData,o.toggle,o.height,o.width);break;case"toggleError":t.toggleError(o.modelData);break;case"toggleSuccess":t.toggleSuccess(o.modelData)}},!1)},showOnTimer:function(e,t,o){var r=this,n=r.getCurrentForm(e),t=1e3*t;setTimeout(function(){n.opened||r.open(e,o)},t)},showOnScroll:function(e,o,r){var n=this,a=n.getCurrentForm(e),i=this.getScrollingContainer(),o=Math.round(t.body.offsetHeight*(o/100));n.addEventHandler([i],"scroll",function(){var t="scrollTop"in i?i.scrollTop:i.scrollY;t>=o&&!a.opened&&n.open(e,r)})},getScrollingContainer:function(){var e=["content","panel-two"],t=window;return e.forEach(function(e){var o=document.getElementById(e);if(!o)return!1;var r=window.getComputedStyle(o);"auto"===r.overflowY&&(t=o)}),t},open:function(o,r,n){var a=this,i=a.getCurrentForm(o);e.leadFormWidget[o]=a,n||"tab"!=r.subtype||t.getElementById("iframe-"+o).setAttribute("height",r.form_height+"px"),a.preview&&i.isAnchor&&!i.isModal||(i.opened=!n&&!i.isAnchor,n&&(a.iframeRelay(o,r,{exit:!0}),a.toggleWidgetClasses(o,"is-open",!1,!0),"tab"==r.subtype?a.toggleHeight(o,r,parseInt(t.getElementById("iframe-"+o).getAttribute("height"))):"sidebar"==r.subtype&&a.toggleWidth(o,r,300),i.opened=!0),a.toggled=a.preview||n,a.toggleWidgetClasses(o,"fade-in",!1,!0),i.isModal&&(t.body.style.overflow="hidden"))},togglePopup:function(e,o){var r=this;r.toggled=o,o?(r.removeClass(e,"fade-out"),r.toggleWidgetClasses(e,"is-open",!1,!0),r.toggleWidgetClasses(e,"fade-in",!1,!0),t.body.style.overflow="hidden"):(r.removeClass(e,"is-open"),r.toggleWidgetClasses(e,"fade-out",!1,!0),t.body.style.overflow="auto")},buttonClose:function(e){var o=this,r=o.getCurrentForm(e),n=r.type,a=[t.getElementById(o.name+"-"+n+"-close-"+e)];o.closeOnClickOverlay&&r.isModal&&a.push(t.getElementById(o.name+"-"+n+"-widget-"+e)),a.length&&o.addEventHandler(a,"click",function(){o.destroy(e),o.setViewedCookie(e)})},buttonAnchor:function(e){var o=this,r=o.getCurrentForm(e),n=r.type,a=t.getElementById(o.name+"-"+n+"-trigger-"+e);if(a){var i=[a];o.addEventHandler(i,"click",function(){r.opened=!0,o.togglePopup(e,!o.toggled)})}},toggleForm:function(e,t,o,r){var n=e.form_id,a=this.getCurrentForm(n);return this.toggleWidgetClasses(n,"is-open",e.metadata,t),a.opened=!0,r>0?void this.toggleWidth(n,e.metadata,r):void(o>0&&this.toggleHeight(n,e.metadata,o))},toggleHeight:function(e,o,r){var n=this.getCurrentForm(e),a=n.name,i=o.type,s=t.getElementById(a+"-"+i+"-widget-"+e);s&&(s.style.height=r+"px")},toggleWidth:function(e,o,r){var n=this.getCurrentForm(e),a=n.name,i=o.type,s=t.getElementById(a+"-"+i+"-widget-"+e);s&&(s.style.width=r+"px")},toggleError:function(e){this.toggleWidgetClasses(e.form_id,"is-error",e.metadata,!0)},toggleSuccess:function(t){var o=t.metadata.confirmation;"link"==o.type&&""!=o.value?e.location.href=o.value:(this.removeClass(t.form_id,"is-error",t.metadata),this.toggleWidgetClasses(t.form_id,"is-success",t.metadata,!0)),this.setSubmittedCookie(t.form_id)},toggleWidgetClasses:function(e,o,r,n){var a=this,i=a.getCurrentForm(e),s=i?i.name:a.name,l=i?i.type:r.type,d=t.getElementById(s+"-"+l+"-widget-"+e),c=d.className,g="";g=n?c.trim()+" "+o:c.trim().replace(o,"");var m=a.removeDuplicates(g.split(" "));d.className=m.join(" "),"fade-out"==o&&setTimeout(function(){a.removeClass(e,"fade-in")},500)},removeClass:function(e,o,r){var n=this,a=n.getCurrentForm(e),i=a?a.name:n.name,s=a?a.type:r.type,l=t.getElementById(i+"-"+s+"-widget-"+e),d=l.className,c=d.indexOf(o)>-1?d.trim().replace(o,""):d;l.className=c},destroy:function(e,o){var r=this,n=r.getCurrentForm(e),a=n?n.type:o.type,i=!!n&&n.isAnchor,s=t.getElementById("leadform-"+a+"-widget-"+e);r.toggleWidgetClasses(e,"fade-out",!1,!0),t.body.style.overflow="auto",i?r.toggled=!1:setTimeout(function(){s.remove()},1500)},addEventHandler:function(e,t,o){e.length&&e.forEach(function(e){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o,!1)})},removeDuplicates:function(e){var t,o={},r=e.length,n=[];for(t=0;t<r;t+=1)o[e[t]]=e[t];for(t in o)n.push(o[t]);return n},camelCaseToDashed:function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()},jsonRequest:function(e,t){var o=new XMLHttpRequest;o.open("GET.html",e,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onload=function(){t(this.status>=200&&this.status<400,this)},o.send()},createCookie:function(e,o,r){var n,a=new Date;r||(r=3600),a.setTime(a.getTime()+24*r*60*60*1e3),n="; expires="+a.toGMTString(),t.cookie=e+"="+o+n+"; path=/"},readCookie:function(e){for(var o=e+"=",r=t.cookie.split(";"),n=0;n<r.length;n++){for(var a=r[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(o))return a.substring(o.length,a.length)}return null},deleteCookie:function(e){this.createCookie(e,"",-1)}};o.init(e.leadForm)}(window,document);